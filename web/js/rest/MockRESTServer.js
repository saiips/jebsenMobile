var MockRESTServer=function(t,r){r=r||{};var e=r.timeout,a=r.url,i=r.idUrl,o=r.proxy,s=r.fetchParam;this.url="/context-root/ojet/items",this.idUrl=MockRESTServer.idUrl,this.timeout=MockRESTServer.timeout,this.idPool=1e3,this.data=t,this.parentField=r.parentField,this.idField=r.id;var n=this;e&&(this.timeout=e),a&&(this.url=a),i&&(this.idUrl=i);var d={url:this.url,type:"GET",contentType:"json",responseTime:50,response:function(r){var e;e=r.hasOwnProperty("urlParams")&&r.urlParams.hasOwnProperty("id")?n.getDataFromId(r.urlParams.id):n.data?JSON.stringify(n.data):t,void 0!==window.equal&&equal(r.headers["Accept-Language"],oj.Config.getLocale(),"Test Accept-Language locale header setting"),"jsonp"===r.dataType&&r.jsonpCallback?this.responseText=r.jsonpCallback+"("+e+");":this.responseText=e}};s&&(d.urlParams=["id"]),o&&(d.proxy=o),$.mockjax(d),$.mockjax({url:this.idUrl,urlParams:["id"],type:"DELETE",response:function(t){var r,e=t.urlParams.id;r=n.getData();for(var a=0;a<r.length;a++)if(r[a][n.idField]==e)return void r.splice(a,1)}}),$.mockjax({url:this.url,type:"POST",response:function(t){var r=n.getData();r.push(JSON.parse(t.data));var e=r[r.length-1];e[n.idField]||(e[n.idField]=n.idPool.toString(),n.idPool++),this.responseText=e}}),$.mockjax({url:n.idUrl,urlParams:["id"],type:"PUT",response:function(t){for(var r,e=t.urlParams.id,r=n.getData(),a=0;a<r.length;a++){var i=r[a];i[n.idField]==e&&(r[a]=JSON.parse(t.data),this.responseText=r[a])}}})};MockRESTServer.prototype.getDataFromId=function(t){var r=this.getData();if(r instanceof Array){for(var e=[],a=0;a<r.length;a++)r[a][this.parentField]==t&&e.push(r[a]);return JSON.stringify(e)}return r},MockRESTServer.prototype.getURL=function(){return this.url},MockRESTServer.prototype.shutdown=function(){$.mockjax.clear()},MockRESTServer.prototype.getData=function(){var t;if(this.data instanceof Array)return this.data;for(t in this.data)if(this.data.hasOwnProperty(t)&&this.data[t]instanceof Array)return this.data[t];return this.data},MockRESTServer.timeout=10,MockRESTServer.idUrl=/^\/context-root\/ojet\/items\/([\d]+)$/i;