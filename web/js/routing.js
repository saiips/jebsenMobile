define(["crossroads","history"],function(t){function o(){var o=window.location.href.split("/").pop();t.parse(o)}function e(o,e){var a=window.location.href.split("/").pop();if(o.target.id)var n=window.location.pathname.split("/").pop()+"?page="+o.target.id;else var n=window.location.pathname.split("/").pop()+"?page="+o.target;return n!==a&&(history.pushState(null,null,n),t.parse(n)),!0}return window.addEventListener("popstate",o,!1),{parseUrl:o,setRoute:e}});