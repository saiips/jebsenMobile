define(["knockout","jquery","moment","appController","util/commonhelper","pages/common/constant","config/appconfig","util/appui","util/devmode"],function(e,n,t,o,i,a,r,s,c){function m(){function o(e,n,t,o){t.apply(o,[e,n])}function m(){var e=n.Deferred(),t=a.GET_MAINTENANCE_TIME;return c.isEnabled()&&c.isOffline()?(n.getJSON("js/app/pages/common/getMaintenanceMock.json",function(n){setTimeout(function(){e.resolve(n,{status:200})},500)}),n.when(e)):(amplify.request({resourceId:t,success:e.resolve,error:e.reject,data:[]}),n.when(e))}var u=this;u.setMaintenance=function(e,n,t){this.startTime=e,this.endTime=n},u.init=function(){m().done(function(n){Array.isArray(n)&&(n=n[0]);var t=n.items;console.log("maintenance table : respJSON = "+e.toJSON(t[0])),s.setLocalStorage(a.MAINTENANCE_START,t[0].start),s.setLocalStorage(a.MAINTENANCE_END,t[0].end),o(t[0].start,t[0].end,u.setMaintenance,this),console.log("Maintenance Window : "+this.startTime+" - "+this.endTime)})},u.isMaintenance=function(){var e=s.getLocalStorage(a.MAINTENANCE_START),n=s.getLocalStorage(a.MAINTENANCE_END),o=t(e,"HH:mm"),n=t(n,"HH:mm"),c=i.getClientCurrentDate("HH:mm"),m=t(c,"HH:mm");r.get("environment");return!(m.isBefore(o)||!m.isBefore(n))}}return new m});