define(["knockout","jquery","util/appui","util/devmode","util/commonhelper","pages/common/constant"],function(e,t,r,s,o,n){function a(){function a(a,i){var u=t.Deferred(),c=e.utils.parseJson(a),l=c.InputParameters.P_ORG_ID,f=c.InputParameters.P_ACCOUNT_NUMBER,_=c.InputParameters.P_SHIP_TO_ORG_ID,p=n.ORDER_LIST_KEY+":"+l+":"+f+":"+_;if(s.isEnabled()&&s.isOffline())return t.getJSON("js/app/pages/orderHist/orderHistMock.json",function(e){setTimeout(function(){u.resolve(e,{status:200})},500)}),t.when(u);var O=r.getLocalStorage(p);return O&&!i?(console.log("[Local Storage] Order History List - "+p),u.resolve(O,{status:200})):(console.log("[Amplify Request] Order History List - "+p),amplify.request({resourceId:n.ORDER_LIST_KEY,success:u.resolve,error:u.reject,data:a}),r.setLocalStorage(p+":"+n.ORDER_HISTORY_SYNC_DATETIME,o.getClientCurrentDate(n.DATETIME_FORMAT).toUpperCase()),t.when(u).done(function(e,t,s){r.setLocalStorage(p,e)})),t.when(u)}this.getOrderListMessage=function(e){return a(e)},this.refreshOrderListMessage=function(e){return a(e,!0)}}return new a});