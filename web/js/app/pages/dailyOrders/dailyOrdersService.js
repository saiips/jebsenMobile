define(["knockout","jquery","util/appui","util/devmode","util/commonhelper","pages/common/constant"],function(e,r,t,o,n,s){function a(){function a(a,u){var i=r.Deferred(),c=e.utils.parseJson(a),l=c.InputParameters.P_ORG_ID,f=c.InputParameters.P_SALESREP_ID,d=s.DAILY_ORDER_SUMMARY_KEY+":"+l+":"+f;if(o.isEnabled()&&o.isOffline())return r.getJSON("js/app/pages/orderHist/orderHistMock.json",function(e){setTimeout(function(){i.resolve(e,{status:200})},500)}),r.when(i);var g=t.getLocalStorage(d);return g&&!u?(console.log("[Local Storage] Daily Order Summary - "+d),i.resolve(g,{status:200})):(console.log("[Amplify Request] Daily Order Summary - "+d),amplify.request({resourceId:s.DAILY_ORDER_SUMMARY_KEY,success:i.resolve,error:i.reject,data:a}),t.setLocalStorage(d+":"+s.DAILY_ORDER_SYNC_DATETIME,n.getClientCurrentDate(s.DATETIME_FORMAT).toUpperCase()),r.when(i).done(function(e,r,o){t.setLocalStorage(d,e)})),r.when(i)}this.getOrderListMessage=function(e){return a(e)},this.refreshOrderListMessage=function(e){return a(e,!0)}}return new a});