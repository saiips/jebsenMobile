define(["knockout","jquery","module","amplify","util/appui","util/devmode","appController","pages/common/constant","util/commonhelper"],function(e,t,o,r,s,n,i,a,u){function c(){function o(o,c){var l=t.Deferred(),I=(e.utils.unwrapObservable(i.moduleConfig.params.rootContext.selCustomerProfile.priceListId),e.utils.parseJson(o)),_=I.InputGetPriceList.P_ORG_ID,T=I.InputGetPriceList.P_PRICE_LIST_ID_TBL.P_PRICE_LIST_ID_TBL_ITEM[0].PRICE_LIST_ID,p=a.STANDARD_PRICE_LIST_KEY+":"+_+":"+T;if(n.isEnabled()&&n.isOffline())return t.getJSON("js/app/pages/newOrder/newOrderMock.json",function(e){setTimeout(function(){l.resolve(e,{status:200})},500)}),t.when(l);var L=s.getLocalStorage(p);return L&&!c?(console.log("[Local Storage] Price List - "+p),l.resolve(L,{status:200})):(console.log("[Amplify Request] Price List - "+p),r.request({resourceId:a.STANDARD_PRICE_LIST_KEY,success:l.resolve,error:l.reject,data:o}),s.setLocalStorage(p+":"+a.NEW_ORDER_LIST_SYNC_DATETIME,u.getClientCurrentDate(a.DATETIME_FORMAT).toUpperCase()),t.when(l).done(function(e,t,o){s.setLocalStorage(p,e)})),t.when(l)}function c(o,i){var c=t.Deferred();console.log("getTopItemListMessage Payload = "+e.toJS(o));var l=e.utils.parseJson(o),I=l.InputGetTop10PriceList.P_ORG_ID,_=l.InputGetTop10PriceList.P_SHIP_TO_ORG_ID,T=l.InputGetTop10PriceList.P_PRICE_LIST_ID,p=a.TOP_ITEM_LIST_KEY+":"+I+":"+_+":"+T;if(n.isEnabled()&&n.isOffline())return t.getJSON("js/app/pages/newOrder/newOrderMock.json",function(e){setTimeout(function(){c.resolve(e,{status:200})},500)}),t.when(c);var L=s.getLocalStorage(p);return L&&!i?(console.log("[Local Storage] Top Item List - "+p),c.resolve(L,{status:200})):(console.log("[Amplify Request] Top Item List - "+p),r.request({resourceId:a.TOP_ITEM_LIST_KEY,success:c.resolve,error:c.reject,data:o}),s.setLocalStorage(p+":"+a.TOP_ITEM_LIST_SYNC_DATATIME,u.getClientCurrentDate(a.DATETIME_FORMAT).toUpperCase()),t.when(c).done(function(e,t,o){s.setLocalStorage(p,e)})),t.when(c)}this.getPriceListMessage=function(e){return o(e,!1)},this.refreshPriceListMessage=function(e){return o(e,!0)},this.getTopItemListMessage=function(e){return c(e,!1)},this.refreshTopItemListMessage=function(e){return c(e,!0)}}return new c});