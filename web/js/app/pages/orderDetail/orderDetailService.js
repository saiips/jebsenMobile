define(["knockout","jquery","module","amplify","appController","util/appui","util/devmode","util/commonhelper","pages/common/constant"],function(e,t,r,n,o,s,a,i,u){function l(){function r(r,o){var l=t.Deferred(),c=e.utils.parseJson(r),d=c.InputGetOrderLineList.P_ORG_ID,f=c.InputGetOrderLineList.P_HEADER_ID,D=u.ORDER_LINES_KEY+":"+d+":"+f;if(a.isEnabled()&&a.isOffline())return t.getJSON("js/app/pages/orderDetail/orderDetailMock.json",function(e){setTimeout(function(){l.resolve(e,{status:200})},500)}),t.when(l);var g=s.getLocalStorage(D);return g&&!o?(console.log("[Local Storage] Order Detail - "+D),l.resolve(g,{status:200})):(console.log("[Amplify Request] Order Detail - "+D),n.request({resourceId:u.ORDER_LINES_KEY,success:l.resolve,error:l.reject,data:r}),s.setLocalStorage(D+":"+u.ORDER_DETAIL_SYNC_DATETIME,i.getClientCurrentDate(u.DATETIME_FORMAT).toUpperCase()),t.when(l).done(function(e,t,r){s.setLocalStorage(D,e)})),t.when(l)}function l(){var e=t.Deferred(),r=o.moduleConfig.params.rootContext.savedOrderLine;return e.resolve(r,{status:200}),t.when(e)}this.getOrderDetailMessage=function(e){return r(e)},this.refreshOrderDetailMessage=function(e){return r(e,!0)},this.getDataSyncMessage=function(){return l()}}return new l});