define(["knockout","jquery","module","amplify","util/appui","util/devmode","appController","pages/common/constant","util/commonhelper"],function(e,t,n,o,r,u,s,i,_){function a(){function n(n){var s=t.Deferred(),a=e.utils.parseJson(n),c=a.InputGetPriceList.P_ORG_ID,l=a.InputGetPriceList.P_PRICE_LIST_ID_TBL.P_PRICE_LIST_ID_TBL_ITEM[0].PRICE_LIST_ID,I=i.STANDARD_PRICE_LIST_KEY+":"+c+":"+l;return u.isEnabled()&&u.isOffline()?(t.getJSON("js/app/pages/newOrder/newOrderMock.json",function(e){setTimeout(function(){s.resolve(e,{status:200})},500)}),I):(console.log("[Amplify Request] Price List (Customer Level) - "+I),o.request({resourceId:i.STANDARD_PRICE_LIST_KEY,success:s.resolve,error:s.reject,data:n}),r.setLocalStorage(I+":"+i.NEW_ORDER_LIST_SYNC_DATETIME,_.getClientCurrentDate(i.DATETIME_FORMAT).toUpperCase()),t.when(s).done(function(e,t,n){r.setLocalStorage(I,e),r.updateDownloadRequestCount(i.P_PRICE_CNT,1)}).fail(function(){r.updateDownloadRequestCount(i.P_PRICE_CNT,1)}),I)}this.registerService=function(e){return n(e)}}return new a});