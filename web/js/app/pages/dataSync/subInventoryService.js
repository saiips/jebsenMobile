define(["knockout","jquery","amplify","util/appui","util/devmode","appController","pages/common/constant"],function(e,t,o,n,r,s,u){function a(){function a(){var e,t=s.moduleConfig.params.rootContext.userProfile.orgUnitId,o=s.moduleConfig.params.rootContext.userProfile;return e=t==u.ORG_UNIT_ID_WINE?JSON.stringify({InputParameters:{HeaderInfo:{UserID:o.username,UserRole:o.salesRole,CallerID:""},P_ORG_ID:u.IO_ID_2899}}):JSON.stringify({InputParameters:{HeaderInfo:{UserID:o.username,UserRole:o.salesRole,CallerID:""},P_ORG_ID:u.IO_ID_2898}})}function i(){var s=t.Deferred(),i=a(),l=e.utils.parseJson(i),I=l.InputParameters.P_ORG_ID,f=u.P_SUB_INVENTORY_KEY+":"+I;r.isEnabled()&&r.isOffline()?t.getJSON("js/app/pages/stockInquiry/subInventoryMock.json",function(e){setTimeout(function(){s.resolve(e,{status:200})},500)}):(console.log("[Amplify Request] SubInventory - "+f),o.request({resourceId:u.P_SUB_INVENTORY_KEY,success:s.resolve,error:s.reject,data:i}),t.when(s).done(function(e,t,o){n.setLocalStorage(f,e),n.updateDownloadRequestCount(u.P_SUB_INVENTORY_CNT,1)}).fail(function(){n.updateDownloadRequestCount(u.P_SUB_INVENTORY_CNT,1)}))}this.registerService=function(){return i()},this.getData=function(e){return n.getLocalStorage(e)}}return new a});