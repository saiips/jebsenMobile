define(["knockout","jquery","amplify","util/appui","util/devmode","appController","pages/common/constant"],function(e,t,o,n,r,u,s){function i(){function e(){var e=u.moduleConfig.params.rootContext.userProfile.username,t=u.moduleConfig.params.rootContext.userProfile.salesRole,o=JSON.stringify({InputGetShippingMethod:{HeaderInfo:{UserID:e,UserRole:t,CallerID:""}}});return o}function i(){var u=t.Deferred(),i=e(),a=s.P_SHIPMENT_METHOD_KEY;r.isEnabled()&&r.isOffline()?t.getJSON("js/app/pages/stockInquiry/shipmentMethodMock.json",function(e){setTimeout(function(){u.resolve(e,{status:200})},500)}):(console.log("[Amplify Request] Shipment Method  - "+a),o.request({resourceId:s.P_SHIPMENT_METHOD_KEY,success:u.resolve,error:u.reject,data:i}),t.when(u).done(function(e,t,o){n.setLocalStorage(a,e),n.updateDownloadRequestCount(s.P_SHIPMENT_METHOD_CNT,1)}).fail(function(){n.updateDownloadRequestCount(s.P_SHIPMENT_METHOD_CNT,1)}))}this.registerService=function(){return i()},this.getData=function(e){return n.getLocalStorage(e)}}return new i});